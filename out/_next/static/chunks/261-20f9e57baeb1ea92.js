"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{1625:(e,t,a)=>{a.d(t,{b:()=>n});var s=a(5155),i=a(2115),l=a(7739),r=a(6766);function n(){let{gamePhase:e,selectedImage:t,gridSize:a,timeRemaining:n,moves:c,tiles:d,isTimerRunning:o,startGame:m,shuffleTiles:x,moveTile:g,tick:u}=(0,l.F)(),[h,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if("shuffling"===e){p(!0);let e=setTimeout(()=>{x(),p(!1)},1e3);return()=>clearTimeout(e)}},[e,x]),(0,i.useEffect)(()=>{if(o){let e=setInterval(u,1e3);return()=>clearInterval(e)}},[o,u]),(0,i.useEffect)(()=>{"selecting"===e&&t&&m()},[e,t,m]);let b=e=>({row:Math.floor(e/a),col:e%a}),f=e=>d[e];return t?(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6 p-4 bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"時間"}),(0,s.jsx)("div",{className:"text-xl font-bold ".concat(n<=30?"text-red-600":"text-blue-600"),children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(n)})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"手数"}),(0,s.jsx)("div",{className:"text-xl font-bold text-gray-800",children:c})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:t.nameJa}),(0,s.jsxs)("div",{className:"text-lg font-semibold text-gray-800",children:[a,"\xd7",a," パズル"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"w-full",children:[h&&(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("div",{className:"text-lg font-semibold text-blue-600 animate-pulse",children:"パズルをシャッフル中..."})}),(0,s.jsx)("div",{className:"relative aspect-square max-w-2xl mx-auto bg-gray-200 rounded-lg overflow-hidden shadow-xl",style:{display:"grid",gridTemplateColumns:"repeat(".concat(a,", 1fr)"),gap:"2px"},children:Array.from({length:a*a},(e,i)=>{let l=f(i),r=0===l,{row:n,col:c}=b(0===l?0:l-1);return(0,s.jsx)("div",{className:"\n                    relative aspect-square cursor-pointer transition-all duration-200\n                    ".concat(r?"bg-gray-300":"bg-white hover:brightness-110","\n                    ").concat(h?"animate-pulse":"","\n                  "),onClick:()=>!r&&g(i),style:{backgroundImage:r?"none":"url(".concat(t.imagePath,")"),backgroundSize:"".concat(100*a,"% ").concat(100*a,"%"),backgroundPosition:"".concat(100/(a-1)*c,"% ").concat(100/(a-1)*n,"%")},children:!r&&(0,s.jsx)("div",{className:"absolute top-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded",children:l})},i)})})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"完成画像"}),(0,s.jsx)("div",{className:"w-32 h-32 relative rounded-lg overflow-hidden shadow-md",children:(0,s.jsx)(r.default,{src:t.imagePath,alt:t.nameJa,fill:!0,className:"object-cover"})})]})})]}),"playing"===e&&(0,s.jsxs)("div",{className:"text-center mt-6",children:[(0,s.jsx)("p",{className:"text-white/80",children:"\uD83D\uDCA1 空白の隣のタイルをクリックして移動させよう！"}),(0,s.jsx)("p",{className:"text-xs text-white/60 mt-2",children:"目標: 1, 2, 3, ... の順番に並べて、右下を空白にする"})]})]}):null}},2202:(e,t,a)=>{a.d(t,{q:()=>n});var s=a(5155),i=a(2115),l=a(7739),r=a(3847);function n(){let{gamePhase:e,difficulty:t,selectedImage:a,moves:n,timeRemaining:c,couponEarned:d,timeLimit:o,resetGame:m,setDifficulty:x}=(0,l.F)(),[g,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(""),[b,f]=(0,i.useState)(""),v="success"===e,j=o-c;(0,i.useEffect)(()=>{if(v){u(!0);let e=setTimeout(()=>u(!1),3e3);if(d){let e=new Date,a=(0,r.I8)(e,t),s="".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日");p(a),f(s)}return()=>clearTimeout(e)}},[v,d,t]);let N=()=>{let e=100*j/o;return e<30?{text:"素晴らしい！",color:"text-yellow-500",stars:"⭐⭐⭐"}:e<60?{text:"グッド！",color:"text-blue-500",stars:"⭐⭐"}:{text:"クリア！",color:"text-green-500",stars:"⭐"}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[g&&v&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,s.jsxs)("div",{className:"text-center animate-bounce",children:[(0,s.jsx)("div",{className:"text-8xl mb-4",children:"\uD83C\uDF89"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-white",children:"おめでとう！"})]})}),(0,s.jsxs)("div",{className:"p-8 rounded-xl shadow-lg ".concat(v?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:v?"\uD83C\uDF89":"\uD83D\uDE22"}),(0,s.jsx)("h2",{className:"text-3xl font-bold mb-2 ".concat(v?"text-green-700":"text-red-700"),children:v?"パズル完成！":"タイムアップ..."}),(0,s.jsxs)("p",{className:"text-gray-600",children:[null==a?void 0:a.nameJa," ","beginner"===t?"初級":"intermediate"===t?"中級":"上級","パズル"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"text-center p-4 bg-white rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"手数"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:n})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-white rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"時間"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(j)})]})]}),v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(N().color),children:[N().stars," ",N().text]})}),d&&h&&(0,s.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-2xl border-2 border-dashed border-green-300 mb-6 shadow-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF89"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-green-700 mb-6",children:"特典クーポンGET！"}),(0,s.jsx)("div",{className:"bg-green-600 text-white text-4xl font-bold py-4 px-8 rounded-xl mb-6 shadow-md",children:d}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-xl border border-green-200 mb-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-left",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:"有効期限"}),(0,s.jsx)("div",{className:"text-lg font-bold text-gray-800",children:b})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:"特典コード"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600 font-mono",children:h})]})]})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsx)("p",{className:"font-semibold",children:"\uD83D\uDCF1 このスクリーンショットをレジで提示してください"}),(0,s.jsxs)("p",{className:"text-xs text-red-500",children:["※有効期限：本日限り（",b,"）"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"※おひとり様1回限り"})]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[!v&&(0,s.jsx)("button",{onClick:()=>{x(t)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"もう一度挑戦"}),(0,s.jsx)("button",{onClick:()=>x(t),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:v?"同じ難易度でもう一度":"画像を変えて挑戦"}),(0,s.jsx)("button",{onClick:m,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:"難易度選択に戻る"})]})]})]})}},3847:(e,t,a)=>{function s(e,t){let a="".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0"),"-").concat(t),s=0;for(let e=0;e<a.length;e++)s=(s<<5)-s+a.charCodeAt(e),s&=s;return(Math.abs(s)%9e3+1e3).toString()}function i(e,t){let a=t*t;for(let t=0;t<a-1;t++)if(e[t]!==t+1)return!1;return 0===e[a-1]}function l(e,t){let a=[],s=Math.floor(e/t),i=e%t;return s>0&&a.push(e-t),s<t-1&&a.push(e+t),i>0&&a.push(e-1),i<t-1&&a.push(e+1),a}a.d(t,{I8:()=>s,Yk:()=>i,pR:()=>l})},6566:(e,t,a)=>{a.d(t,{L:()=>n});var s=a(5155),i=a(2115),l=a(7739);let r=[{id:"peach",name:"Peach Sorbetto",nameJa:"ピーチ・ソルベット",imagePath:"/images/puzzle/puzzle-peach-cup.jpg",previewPath:"/images/products/peach-cup.jpg"},{id:"blueberry",name:"Blueberry Lavanda",nameJa:"ブルーベリー・ラベンダー",imagePath:"/images/puzzle/puzzle-blueberry-cup.jpg",previewPath:"/images/products/blueberry-cup.jpg"},{id:"kiwi",name:"Kiwi Verde",nameJa:"キウイ・ヴェルデ",imagePath:"/images/puzzle/puzzle-kiwi-cup.jpg",previewPath:"/images/products/kiwi-cup.jpg"},{id:"lemon",name:"Limone Fresco",nameJa:"リモーネ・フレスコ",imagePath:"/images/puzzle/puzzle-lemon-cup.jpg",previewPath:"/images/products/lemon-cup.jpg"},{id:"mango",name:"Mango Tropicale",nameJa:"マンゴー・トロピカーレ",imagePath:"/images/puzzle/puzzle-mango-cup.jpg",previewPath:"/images/products/mango-cup.jpg"},{id:"raspberry",name:"Lampone Rosso",nameJa:"ランポーネ・ロッソ",imagePath:"/images/puzzle/puzzle-raspberry-cup.jpg",previewPath:"/images/products/raspberry-cup.jpg"}];function n(){let{setSelectedImage:e,difficulty:t}=(0,l.F)(),[a,n]=(0,i.useState)(new Set),c={beginner:{name:"初級",color:"text-green-600",gridSize:"3\xd73"},intermediate:{name:"中級",color:"text-yellow-600",gridSize:"4\xd74"},advanced:{name:"上級",color:"text-red-600",gridSize:"5\xd75"}}[t];return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"パズル画像を選択してください"}),(0,s.jsx)("p",{className:"text-white/80 mb-2",children:"選択した画像でスライドパズルを作成します"}),(0,s.jsxs)("div",{className:"inline-block px-4 py-2 rounded-full ".concat(c.color," bg-white/90 font-semibold"),children:[c.name," (",c.gridSize,")"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:r.map(t=>(0,s.jsxs)("button",{onClick:()=>e(t),className:"group relative overflow-hidden rounded-xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[(0,s.jsx)("div",{className:"aspect-square relative",children:(0,s.jsx)("img",{src:t.previewPath,alt:t.nameJa,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:e=>{let t=e.currentTarget.parentElement;t&&(t.innerHTML='\n                      <div class="w-full h-full flex items-center justify-center text-4xl bg-gradient-to-br from-pink-100 to-orange-100">\n                        \uD83C\uDF68\n                      </div>\n                    ')}})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#374151"},children:t.nameJa}),(0,s.jsx)("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"2px"},children:t.name})]})})]},t.id))}),(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsx)("p",{className:"text-sm text-white/60",children:"\uD83D\uDCA1 ヒント: 色の境界がはっきりした画像の方が簡単です"})})]})}},7739:(e,t,a)=>{a.d(t,{F:()=>n});var s=a(5453),i=a(6786),l=a(3847);let r={beginner:{gridSize:3,timeLimit:180},intermediate:{gridSize:4,timeLimit:240},advanced:{gridSize:5,timeLimit:300}},n=(0,s.v)()((0,i.Zr)((e,t)=>({gamePhase:"idle",difficulty:"beginner",selectedImage:null,gridSize:3,timeLimit:180,timeRemaining:180,moves:0,isTimerRunning:!1,tiles:[],emptyIndex:8,couponEarned:null,setDifficulty:t=>{let a=r[t],s=a.gridSize*a.gridSize,i=Array.from({length:s},(e,t)=>t===s-1?0:t+1);e({difficulty:t,gridSize:a.gridSize,timeLimit:a.timeLimit,timeRemaining:a.timeLimit,tiles:i,emptyIndex:s-1,gamePhase:"selecting"})},setSelectedImage:a=>{e({selectedImage:a}),t().startGame()},startGame:()=>{let{gridSize:a}=t(),s=a*a,i=Array.from({length:s},(e,t)=>t===s-1?0:t+1);e({gamePhase:"shuffling",moves:0,isTimerRunning:!1,timeRemaining:t().timeLimit,tiles:i,emptyIndex:s-1})},shuffleTiles:()=>{let a,{gridSize:s}=t(),i=s*s;do{a=Array.from({length:i},(e,t)=>t===i-1?0:t+1);for(let e=a.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}}while((0,l.Yk)(a,s));let r=a.indexOf(0);e({tiles:a,emptyIndex:r,gamePhase:"playing",isTimerRunning:!0})},moveTile:a=>{let{tiles:s,emptyIndex:i,gridSize:r,gamePhase:n}=t();if("playing"!==n||!(0,l.pR)(i,r).includes(a))return;let c=[...s];c[i]=c[a],c[a]=0,e({tiles:c,emptyIndex:a,moves:t().moves+1}),(0,l.Yk)(c,r)&&t().endGame(!0)},endGame:a=>{let{difficulty:s}=t();e({gamePhase:a?"success":"failed",isTimerRunning:!1,couponEarned:a?({beginner:"5% OFF",intermediate:"8% OFF",advanced:"12% OFF"})[s]:null})},tick:()=>{let{timeRemaining:a,isTimerRunning:s}=t();if(s&&a>0){let s=a-1;e({timeRemaining:s}),0===s&&t().endGame(!1)}},resetGame:()=>{e({gamePhase:"idle",selectedImage:null,moves:0,isTimerRunning:!1,timeRemaining:t().timeLimit,tiles:[],emptyIndex:0,couponEarned:null})},isPuzzleComplete:e=>{let{gridSize:a}=t(),s=a*a;for(let t=0;t<s-1;t++)if(e[t]!==t+1)return!1;return 0===e[s-1]},getValidMoves:(e,t)=>{let a=[],s=Math.floor(e/t),i=e%t;return s>0&&a.push(e-t),s<t-1&&a.push(e+t),i>0&&a.push(e-1),i<t-1&&a.push(e+1),a}}),{name:"puzzle-game-storage",partialize:e=>({difficulty:e.difficulty,couponEarned:e.couponEarned})}))}}]);